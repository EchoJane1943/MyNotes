# 风控知识学习

## 一些重要的网址

https://mp.sohu.com/profile?xpt=Y2ZydTIwMTZAc29odS5jb20=&_f=index_pagemp_1&spm=smpc.content.author.1.15953821698328om4Zdp

https://www.zhihu.com/people/zhe-li-82

https://zhuanlan.zhihu.com/p/46575367


## 风控业务背景
随着新客获客成本越来越高，贷中客户管理越来越重要，包括额度管理（提额降额）、利率调整、提单意愿预测、流失倾向预测、营销响应预测等。
信贷生命周期管理大致可分为贷前（准入审核、额度授信、支用审批等）、贷中（额度管理、流失预测、营销响应等）、贷后（催收：还款率预测、账龄滚动、失联预测）三个阶段。
 
风控建模时，我们常把样本标签分为GBIX四类，其中：G = Good（好人，标记为0），B = Bad（坏人，标记为1），I = Indeterminate （不定，未进入表现期），X = Exclusion(排斥，异常样本)

可用数据
在平常生活中，我们把钱借给别人后，一般也都会旁敲侧击打听对方的行为，包括但不限于：
消费行为：也就是资金用途，即是否按借钱原因所述，真正专款专用。如果对方借到手后是用于不良嗜好（如黄赌毒、奢侈品等），那么我们就有理由相信还钱的可能性不高。因此，可以从信用卡账单、借记卡流水、电商数据等提取消费行为。
负债压力：除了欠这边之外，其他地方是否还有（多头）负债。用户共债压力越大，还款可能性就越低。通常情况下，一般哪家催的急，客户就选择还哪一家。
收入能力：是否有其他收入？如果没有收入，还款能力将直接受影响。收入数据包括流动资产（工资、公积金）、固定资产等。
履约历史：之前是否就有欠钱不还的黑历史，还是能按时履约。因此，需要记录历史的还款行为，比如提前还款，说明用户目前手头资金充足，重视诚信记录；习惯性逾期，则说明用户手头紧张，或者不够重视诚信记录。
活跃行为：借钱之后是否还能联系到？如果从此失联，消失在你的视野里，那么大概率就是不会还钱。在网贷产品中，我们可以观察用户登陆App的行为。
（电子商务、社交网络和搜索行为）

 

## 基本概念
#### 1）vintage
	
	作用：明确表现期，用于分析客户表现的趋势、稳定的时间。
	      资产表现是否变化，参考检验策略效果，外部环境/客户质量可能变化；
	      预测资产表现；
	      结合产品要素分析；
	      资产稳定期，确定表现期，模型y标签；
	含义：vintage源于葡萄酒酿造，Vintage分析是指评估不同年份的葡萄酒的品质随着窖藏时间的推移而发生的变化，并且窖藏一定年份后，葡萄酒的品质会趋于稳定。
	一个客户的好坏，需要经过若干个还款周期后才能充分暴露，如果表现期较短，有可能将一个不是很坏的客户定义为坏，也有可能将一个很坏的客户定义为好。
	可以通过比较不同时间的贷款在相同周期的逾期表现，来分析不同时间的风控策略的差异、宏观形势的变化等。
	拓展概念：MOB（month of book），账龄
 

#### 2）滚动率
	作用：定义客户好坏程度
	含义：滚动率分析就是从某个观察点之前的一段时间(称为观察期)的最坏的状态向观察点之后的一段时间(称为表现期)的最坏状态的发展变化情况。
	在对坏客户进行定义时，应将坏客户定义得尽可能坏，以与好客户尽可能的区分开来。
 


#### 3）A卡/B卡/C卡
	作用： 
	含义：
	A卡（Application score card）申请评分卡
	B卡（Behavior score card）行为评分卡
	C卡（Collection score card）催收评分卡

	评分机制的区别在于：
	1.使用的时间不同。分别侧重贷前、贷中、贷后；
	2.数据要求不同。A卡一般可做贷款0-1年的信用分析，B卡则是在申请人有了一定行为后，有了较大数据进行的分析，一般为3-5年，C卡则对数据要求更大，需加入催收后客户反应等属性数据。
	3.每种评分卡的模型会不一样。在A卡中常用的有逻辑回归，AHP等，而在后面两种卡中，常使用多因素逻辑回归，精度等方面更好。
	贷前风控：申请评分（Application Scoring），主要目的是为了识别获客阶段用户的逾期风险。一般应用于准入、额度授信、风险定价、支用审批，需要实时T+0部署到线上。
	贷中风控：行为评分（Behavior Scoring），根据借款人放贷后的行为表现，预测未来逾期风险。在贷前阶段，我们对借款人的履约行为掌握相对较少，而且是静态的，引入B卡的目的是为了动态监控放款后的风险变化。B卡一般不需要实时上线，离线T+1计算即可。
	贷后风控：催收评分（Collection Scoring），在借款人当前还款状态为逾期的情况下，预测未来出催（还款）的可能性。这有助于催收员根据不同的逾期程度，采取不同的催收措施。例如，轻微逾期采用短信、电话提醒（以及相应的话术），重度逾期采用律师函等手段。C卡同样不需要实时上线，离线T+1计算即可。


#### 4）Y变量
	定义：Y变量即为客户好坏标签变量。Y变量要结合滚动率分析和Vintage分析来定义，滚动率分析用于对客户好坏程度进行定义，Vintage分析用于设置合适的表现期。

	定义Y变量可以分为以下几步：
	1）、进行滚动率分析，定义坏客户，如上面所说的M4+为坏客户；
	2）、然后统计出M4+的Vintage数据表及Vintage图，找出成熟期；
	3）、表现期大于成熟期的样本可以用于建模，表现期小于成熟期的样本无法准确定义Y变量，暂时舍弃。
	当然，在实际应用中，根据业务需要，Y变量的定义可以灵活变通。比如在业务刚开展不久，表现期较短，此时无法根据上述方法定义Y变量，可以暂将逾期大于10天、15天或30天的客户定义为坏等等，然后随着时间的推移不断修正Y变量及模型。

#### 5）PSI（Population　Stability　Index，群体稳定性指标）
	作用：反映验证样本在各分数段的分布与建模样本分布的稳定性。在建模中，我们常用来筛选特征变量，评估模型稳定性。
	含义：那么，PSI的计算逻辑是怎样的呢？很多博客文章都会直接告诉我们，稳定性是有参照的，因此需要有两个分布——实际分布（actual）和预期分布（expected）。其中，在建模时通常以训练样本（In the Sample, INS）作为预期分布，而验证样本通常作为实际分布。验证样本一般包括样本外（Out of Sample，OOS）和跨时间样本（Out of Time，OOT）。
	PSI数值越小，两个分布之间的差异就越小，代表越稳定。
	计算： psi = sum(（实际占比-预期占比）* ln(实际占比/预期占比))
	评价标准：
	PSI范围    稳定性    建议事项
	0~0.1    好	没有变化或很少变化
	0.1~0.25    略不稳定	有变化，继续监控后续变化
	大于0.25    不稳定	发生很大变化，进行特征项分析

#### 6）KS值（Kolmogorov-Smirnov）
	作用：信贷场景中常用的衡量指标。KS值可以反映模型的最优区分效果，此时所取的阈值一般作为定义好坏用户的最优阈值。
	含义： 真阳性率（TPR） : 判定为正例也是真正例的比率。伪阳性率（FPR） :判定为正例却不是真正例的比率。KS＝max(TPR-FPR)。KS值越大，表明正负样本区分的程度越好，模型的预测准确性越好。KS值的取值范围是[0，1] ，一般，KS>0.2即可认为模型有比较好的预测准确性。
	KS<0.2：模型无鉴别能力；
	0.2-0.4之间，模型勉强接受；
	0.41-0.5之间，模型具有区别能力；
	0.51-0.6之间，模型有很好的区别能力；
	0.61-0.75之间，模型有非常好的区别能力；
	KS>0.75，模型异常，很有可能有问题。

	征信模型中，最期望得到的信用分数分布是正态分布，对于正负样本分别而言，也都是期望呈正态分布的样子。如果KS值过大，一般超过0.9，就可以认为正负样本分的过开了。不太可能是正态分布，反而是比较极端化的分布状态（U字形，两边多，中间少），这样的分数就不很好，基本可以认为不可用。

	模型ks list： KS(Kolmogorov-Smirnov)用于模型风险区分能力进行评估，指标衡量的是好坏样本累计部分之间的差距。
	KS的计算方式：
	1.计算每个评分区间的好坏账户数。
	2.计算各每个评分区间的累计好账户数占总好账户数比率（good%)和累计坏账户数占总坏账户数比率（bad%）。
	3.计算每个评分区间累计坏账户比与累计好账户占比差的绝对值（累计good%-累计bad%），然后对这些绝对值取最大值记得到KS值。

#### 7）WOE（Weight of Evidence）& IV（Information Value）
	作用：在评分卡建模流程中，证据权重WOE（Weight of Evidence）常用于特征变换，IV（Information Value）则用来衡量特征的预测能力（因此可用于快速筛选变量）。
	应用：WOE在业务中的应用，
		处理缺失值：当数据源没有100%覆盖时，那就会存在缺失值，此时可以把null单独作为一个分箱。这点在分数据源建模时非常有用，可以有效将覆盖率哪怕只有20%的数据源利用起来。
		处理异常值：当数据中存在离群点时，可以把其通过分箱离散化处理，从而提高变量的鲁棒性（抗干扰能力）。例如，age若出现200这种异常值，可分入“age > 60”这个分箱里，排除影响。
		业务解释性：我们习惯于线性判断变量的作用，当x越来越大，y就越来越大。但实际x与y之间经常存在着非线性关系，此时可经过WOE变换；
	计算：IV是WOE的加权和, 取值范围[0,+∞) 。如果当前分组中只包含响应客户或者未响应客户时，IV = +∞。量化指标含义如下：
	< 0.02 useless for prediction、
	0.02 to 0.1Weak predictor、
	0.1 to 0.3Medium predictor、
	0.3 to 0.5Strong predictor 、
	>0.5 Suspicious or too good to be true。

	〖WOE〗_i=ln⁡（(〖Bad〗_i/〖Bad〗_T )⁄(〖Good〗_i/〖Good〗_T )）=ln⁡（〖Bad〗_i/〖Bad〗_T ）-ln⁡（〖Good〗_i/〖Good〗_T ）
	〖IV〗_i=（〖Bad〗_i/〖Bad〗_T ⁡-  〖Good〗_i/〖Good〗_T ）*〖WOE〗_i=（〖Bad〗_i/〖Bad〗_T ⁡-  〖Good〗_i/〖Good〗_T ）*ln⁡（〖Bad〗_i/〖Bad〗_T ）-ln⁡（〖Good〗_i/〖Good〗_T ）
	IV=∑_(i=1)^n▒〖IV〗_i 
		Odds Ratio(OR)优势比
	含义：指的是事件发生和不发生的比例。在信贷事件中，设定这个事件A为客户逾期，即Y=1。那么在条件B下，Odds = P（Y= 1|B）/ P（Y= 0|B）；Odds Ratio则是两组odds的比值； 〖OR〗_(B1/B2)=(P（Y= 1|B1）/ P（Y= 0|B1）)/(P（Y= 1|B2）/ P（Y= 0|B2）)；


#### 8）激活样本/复贷样本
	含义：激活样本指新用户，复贷样本指申请后再次使用贷款的用户。

#### 9）LIFT提升度
	作用：衡量预测模型是否有效
	计算：lift提升图是评估模型的区分能力相对于随机选择的提升程度，一般在开发好模型后，对样本按照评分从低到高排序(也就是风险降序排列)，然后将样本等分成N份，计算每等份样本的坏占比，然后与总体样本的坏占比的比值，就是提升度
	含义：Lift是“运用该模型”和“未运用该模型”所得结果的比值。
	它衡量的是一个模型（或规则）对目标中“响应”的预测能力优于随机选择的倍数，以1为界线，大于1的Lift表示该模型或规则比随机选择捕捉了更多的“响应”，等于1的Lift表示该模型的表现独立于随机选择，小于1则表示该模型或规则比随机选择捕捉了更少的“响应”。
 
 
 
#### 10）循环授信
	含义：在贷前阶段，我们无法很好识别客户风险，因此给予一个初始额度。随着下卡/放款后，客户与我们产生更多的交互，暴露出借款、还款等行为，我们就可以客户的初始额度进行提降。当风险升高时，降低额度以减少损失；反之，提额。

#### 11）风险敞口
	含义：风险敞口（risk exposure）指未加保护的风险，即因债务人违约行为导致的可能承受风险的信贷余额，指实际所承担的风险，一般与特定风险相连。

#### 12）贷款展期
	含义：贷款展期（loan extension）是贷款到期不能归还，经批准办理延长归还时间的手续。

#### 13）借新还旧
	含义：贷款到期（含展期后到期）后不能按时收回，又重新发放贷款用于归还部分或者全部原贷款的行为。
	作用：
	有利于商业银行盘活、收贷任务的完成，克服了诉讼时效的法律限制，进一步明确了债权债务关系，并有可能要求借款人完善或者加强担保，弱化即期贷款风险。
	但是会在一定程度上对社会信用产生负面影响；掩盖了信贷资产质量的真实情况，推迟了信贷风险的暴露时间，沉淀并累积了信贷风险；在办理新贷款的手续上，隐含着相当的法律风险。

#### 14）贷款重组
	含义：贷款重组指由于借款人财务状况恶化，或无力还款而对合同还款条款作出调整的贷款。
	
#### 15）利率
	IRR、APR：年化利率 ( Annual Percentage Rate, APR ) 和内部收益率 ( Internal Rate of Return, IRR ) 。APR 就是常说的名义利率，IRR 就是常说的真实利率。
	常见的还款方式：随借随还、先息后本、等本等息、等额本金、等额本息。


#### 16）不良资产ABS（Asset Backed Securities，资产证券化）
	随着试点机构类型日渐丰富、市场发行机制逐步成熟，作为处置不良贷款的创新手段，不良资产证券化为我国银行业处置不良贷款、化解金融风险起到了重要的推动作用。

	https://wenku.baidu.com/view/4da5d3e2bdd126fff705cc1755270722192e59bb.html

	资金出表的三种方式：企业资产证券化，信贷资产证券化，信贷资产流转平台。

	https://www.iyiou.com/analysis/2019050999637
